---
title: Setting up a website with Github Pages and Travis
subtitle: The easiest way to manage a static website
date: 2018-09-01
draft: true
tags: ["website", "cloudflare"]
---

# Prerequsites

1. Install Hugo on your computer and have a project ready
2. You have obtained a Github auth token for this project (TBD)
3. (Optional) You have your Cloudflare API key

# Set up Github Pages for your repository

In order to serve your static website through Github Pages, you first will need to enable Github Pages for this project.
Go into Settings > Options > Github Pages and enable Github Pages for this project and choose a branch. By default, you can keep it at `gh-pages`.
Then you will be able view your webpage at `<reponame>.<username>.github.io`

There is also the option to set your own domain name for this project, but that will be covered at the end of this tutorial

To determine if your GitHub Pages feature works, feel free to commit an `index.html` file with Hello World to test it out.

# Set up CICD (Travis CI)

Note: You do not have to use TravisCI for this step, but this is what I chose to cover in this tutorial.

Add the following code snippet into a `.travis.yml` file and commit it alongside your Hugo project

```
language: generic
env:
  - HUGO_VERSION=0.57.2 MINIFY_VERSION=2.5.2
before_script:
  - curl --silent -L https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz | tar zxf -
  - curl --silent -L https://github.com/tdewolff/minify/releases/download/v${MINIFY_VERSION}/minify_${MINIFY_VERSION}_linux_amd64.tar.gz | tar zxf -
script:
  - ./hugo
  - ./minify -a -r -o public/ public

# Deploy to GitHub pages
deploy:
  provider: pages
  skip_cleanup: true
  local_dir: public
  github_token: $GITHUB_TOKEN # Set in travis-ci.org dashboard
  target_branch: gh-pages
  on:
    branch: master

# blocklist
branches:
  except:
    - gh-pages
```
Let's break down what is going on here:

1. Pin the version of Hugo and Minify we want to use as local environment variables
2. Download the versions of hugo to compile your website and minify to minize the autogenerated HTML/CSS/JS code
3. Run Hugo to compile your website into the `/public` directory
4. Minify the `/public` directory
5. Deploy the generated public folder into the target branch which convienently is the document root of our Github Pages website
6. Watch changes in every branch except for the `gh-pages` branch

# Go into your TravisCI Dashboard and enter your Github Token

If you have already pushed your `.travis.yml` file, you make have noticed that your first build failed.
That most likely will be due to the build failing at the deploy step as it des not have the appropriate permissions to do so.

Go to: ``